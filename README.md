# 地下城游戏 - 骑士拯救公主

## 项目概述

这是一个基于Qt框架开发的C++地下城游戏，玩家需要帮助骑士从左上角(起点)移动到右下角(终点)拯救公主。游戏包含两种模式：自动模式和手动模式。

## 功能特性

- **两种游戏模式**：
  - 自动模式：系统自动计算最优路径并演示
  - 手动模式：使用方向键控制骑士移动
- **动态地图生成**：随机生成不同尺寸的地图(3×3到100×100)
- **可视化界面**：彩色显示地图和路径
- **数据表格**：显示详细地图数据和计算结果
- **自适应布局**：根据地图大小自动调整显示方式

## 游戏规则

1. 骑士只能向右或向下移动
2. 每个房间有不同的效果：
   - 绿色房间：增加健康值
   - 红色房间：减少健康值
   - 灰色房间：无影响
3. 健康值≤0时游戏失败
4. 到达终点且健康值>0时获胜

## 技术实现

- **核心算法**：
  - 动态规划计算最小初始健康值
  - 路径回溯算法寻找最优路径
- **错误处理**：
  - 自定义异常类
  - 全面的错误检查和恢复机制
- **UI设计**：
  - 使用Qt的Model-View架构
  - 自定义表格委托和视图
  - 响应式布局

## 构建与运行

### 依赖项

- Qt 5.15或更高版本
- C++17编译器

### 构建步骤

1. 克隆仓库：

   bash

   复制

   下载

   ```
   git clone https://github.com/yourusername/dungeon-game.git
   cd dungeon-game
   ```

2. 使用qmake构建：

   bash

   复制

   下载

   ```
   qmake
   make
   ```

3. 运行程序：

   bash

   复制

   下载

   ```
   ./dungeon-game
   ```

## 代码结构

```
dungeon-game/
├── dungeon.h            // 游戏逻辑核心类
├── dungeon.cpp
├── dungeonmapmodel.h    // 地图数据模型
├── dungeonmapmodel.cpp
├── dungeontableview.h   // 自定义表格视图
├── dungeontableview.cpp
├── mainwindow.h         // 主窗口界面
├── mainwindow.cpp
├── maptablewindow.h     // 数据表格窗口
├── maptablewindow.cpp
├── main.cpp             // 程序入口
└── README.md            // 项目文档
```

## 使用说明

1. 设置地图尺寸(3×3到100×100)
2. 点击"生成地图"创建随机地下城
3. 选择游戏模式：
   - 自动模式：系统演示最优路径
   - 手动模式：使用方向键控制骑士移动
4. 点击"显示表格"查看详细数据
5. 表格可导出为CSV文件

## 贡献指南

欢迎提交问题和拉取请求。对于重大更改，请先打开问题讨论您想做的更改。

## 许可证

本项目采用MIT许可证。详情请见LICENSE文件。

------

祝您游戏愉快！如有任何问题，请随时联系项目维护者。